var commonjs2;(()=>{var t={373:(t,e,n)=>{(t.exports=n(252)()).push([t.id,".link line{stroke:dimgray}.link line.separator{stroke:#fff;stroke-width:2px}",""])},783:(t,e,n)=>{(t.exports=n(252)()).push([t.id,".node text{font:10px sans-serif;pointer-events:none}",""])},252:t=>{t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},246:t=>{var e={},n=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},r=n((function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())})),o=n((function(){return document.head||document.getElementsByTagName("head")[0]})),i=null,a=0,c=[];function s(t,n){for(var r=0;r<t.length;r++){var o=t[r],i=e[o.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](o.parts[a]);for(;a<o.parts.length;a++)i.parts.push(p(o.parts[a],n))}else{var c=[];for(a=0;a<o.parts.length;a++)c.push(p(o.parts[a],n));e[o.id]={id:o.id,refs:1,parts:c}}}}function u(t){for(var e=[],n={},r=0;r<t.length;r++){var o=t[r],i=o[0],a={css:o[1],media:o[2],sourceMap:o[3]};n[i]?n[i].parts.push(a):e.push(n[i]={id:i,parts:[a]})}return e}function l(t,e){var n=o(),r=c[c.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function f(t){t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function d(t){var e=document.createElement("style");return e.type="text/css",l(t,e),e}function p(t,e){var n,r,o;if(e.singleton){var c=a++;n=i||(i=d(e)),r=v.bind(null,n,c,!1),o=v.bind(null,n,c,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return e.rel="stylesheet",l(t,e),e}(e),r=b.bind(null,n),o=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=d(e),r=m.bind(null,n),o=function(){f(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,n){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");void 0===(n=n||{}).singleton&&(n.singleton=r()),void 0===n.insertAt&&(n.insertAt="bottom");var o=u(t);return s(o,n),function(t){for(var r=[],i=0;i<o.length;i++){var a=o[i];(c=e[a.id]).refs--,r.push(c)}for(t&&s(u(t),n),i=0;i<r.length;i++){var c;if(0===(c=r[i]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete e[c.id]}}}};var y,h=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function v(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=h(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function m(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function b(t,e){var n=e.css,r=e.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=t.href;t.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}},870:(t,e,n)=>{var r=n(373);"string"==typeof r&&(r=[[t.id,r,""]]),n(246)(r,{}),r.locals&&(t.exports=r.locals)},876:(t,e,n)=>{var r=n(783);"string"==typeof r&&(r=[[t.id,r,""]]),n(246)(r,{}),r.locals&&(t.exports=r.locals)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{default:()=>L});const t=react;var e=n.n(t);const o=prop-types;var i=n.n(o);const a=d3,c=function(t){if(!t||Number.isNaN(parseInt(t.bond,10)))throw new Error("Invalid input");if(t.bond<0)throw new Error("d.bond must be at least 0");return"".concat(4*t.bond-2,"px")},s=function(t,e){return t.category||t.color||e},u=function(t,e){return void 0===t?e:t};function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function y(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}n(876);var v="#39f8ff",m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(m,t);var n,r,o,i,c,l=(i=m,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(i);if(c){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return y(this,t)});function m(){return f(this,m),l.apply(this,arguments)}return n=m,r=[{key:"componentDidMount",value:function(){this.renderD3()}},{key:"componentDidUpdate",value:function(){this.renderD3()}},{key:"renderD3",value:function(){var t=this;if(this.nodesContainer){var e=(0,a.select)(this.nodesContainer),n=e.selectAll(".node").data(this.props.nodes,(function(t){return t.id})),r=n.enter().append("g");r.attr("class","node").on("click",this.props.onClickNode).attr("index",(function(t){return t.id})).call((0,a.drag)().on("start",this.props.onDragStartedNode).on("drag",m.onDragged).on("end",this.props.onDragEndedNode)),e.selectAll(".node").classed("selected",(function(e){return-1!==t.props.selectedAtomIds.indexOf(e.id)?v:""}));var o=(0,a.scaleSqrt)().range([0,6]);r.append("circle").attr("class","atom-circle").attr("r",(function(t){return o(u(t.size,1.5))})).style("fill",(function(t){return s(t,"white")})),(0,a.selectAll)(".atom-circle").style("stroke",(function(e){return-1!==t.props.selectedAtomIds.indexOf(e.id)?v:""})),r.append("text").attr("class","atom-label").attr("dy",".35em").attr("text-anchor","middle").text((function(t){return t.atom})),e.selectAll(".atom-label").attr("fill",(function(e){var n=-1!==t.props.selectedAtomIds.indexOf(e.id)?v:"";return u(e.textcolor,n)})),n.exit().remove()}}},{key:"render",value:function(){var t=this;return e().createElement("g",{className:"nodes-container",ref:function(e){t.nodesContainer=e}})}}],o=[{key:"onDragged",value:function(t){t.fx=a.event.x,t.fy=a.event.y}}],r&&d(n.prototype,r),o&&d(n,o),m}(e().Component);m.propTypes={selectedAtomIds:i().arrayOf(i().number),nodes:i().arrayOf(i().object),onClickNode:i().func,onDragStartedNode:i().func,onDragEndedNode:i().func};const b=m;function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(t,e){return O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},O(t,e)}function w(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}n(870);var S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(l,t);var n,r,o,i,u=(o=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=j(o);if(i){var n=j(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return w(this,t)});function l(){return k(this,l),u.apply(this,arguments)}return n=l,r=[{key:"componentDidMount",value:function(){this.renderD3()}},{key:"componentDidUpdate",value:function(){this.renderD3()}},{key:"renderD3",value:function(){if(this.linksContainer){var t=(0,a.select)(this.linksContainer),e=t.selectAll(".link").data(this.props.links,(function(t){return t.id})),n=e.enter().append("g").attr("class","link");n.append("line").attr("class","link-line"),t.selectAll(".link-line").attr("source",(function(t){return void 0!==t.source.id?t.source.id:t.source})).attr("target",(function(t){return void 0!==t.target.id?t.target.id:t.target})).style("stroke-width",c).style("stroke-dasharray",(function(t){return"dashed"===t.style?5:0})).style("stroke",(function(t){return s(t,"black")})).style("opacity",(function(t){if(0===t.bond)return 0})),n.append("text"),t.selectAll(".link").selectAll("text").attr("x",(function(t){return t.source.x||0})).attr("y",(function(t){return t.source.y||0})).attr("text-anchor","middle").text((function(){return" "})),n.filter((function(t){return t.bond>1})).append("line").attr("class","separator separator-double"),t.selectAll(".separator-double").style("stroke","#FFF").style("stroke-width",(function(t){return"".concat(4*t.bond-5,"px")})),n.filter((function(t){return 3===t.bond})).append("line").attr("class","separator separator-triple"),t.selectAll(".separator-triple").style("stroke",(function(t){return s(t,"black")})).style("stroke-width",(function(){return c(1)})),e.exit().remove()}}},{key:"render",value:function(){var t=this;return e().createElement("g",{className:"links-container",ref:function(e){t.linksContainer=e}})}}],r&&x(n.prototype,r),l}(e().Component);S.propTypes={links:i().arrayOf(i().object)};const A=S;function D(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var C={compareIds:function(t,e){if(!t.length&&e.length||t.length&&!e.length)return!1;var n=new Map;t.forEach((function(t){n.set(t,!1)}));var r,o=D(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(!n.has(i))return!1;n.set(i,!0)}}catch(t){o.e(t)}finally{o.f()}var a,c=D(n);try{for(c.s();!(a=c.n()).done;)if(!a.value[1])return!1}catch(t){c.e(t)}finally{c.f()}return!0},updateObjectInPlace:function(t,e){return Object.keys(e).forEach((function(n){t[n]instanceof Object&&e[n]instanceof Object?t[n]=C.updateObjectInPlace(t[n],e[n]):t[n]=e[n]})),t},updateModels:function(t,e){if(!C.compareIds(t.map((function(t){return t.id})),e.map((function(t){return t.id}))))return e;e.forEach((function(e){for(var n=!1,r=0;r<t.length;r+=1)if(t[r].id===e.id){t[r]=C.updateObjectInPlace(t[r],e),n=!0;break}n||t.push(e)}));for(var n=function(n){var o=t[n];e.find((function(t){return t.id===o.id}))||(t.splice(n,1),n-=1),r=n},r=0;r<t.length;r+=1)n(r);return t}};const R=C;function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}function N(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return T(t)}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(s,t);var n,r,o,i,c=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(o);if(i){var n=M(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return N(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),U(T(e=c.call(this,t)),"onClickNode",(function(t){var n=e.state.selectedAtomIds.slice(0),r=n.indexOf(t.id);-1!==r?n.splice(r,1):n.push(t.id),e.setState({selectedAtomIds:n}),e.props.onChangeSelection(n)})),U(T(e),"onDragStartedNode",(function(t){a.event.active||e.simulation.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y})),U(T(e),"onDragEndedNode",(function(t){a.event.active||e.simulation.alphaTarget(0),t.fx=null,t.fy=null})),U(T(e),"renderTransform",(function(){if(e.svg){var t=(0,a.select)(e.svg);t.selectAll(".node").attr("transform",(function(t){return"translate(".concat(t.x||0,",").concat(t.y||0,")")}));var n=t.selectAll(".link");n.selectAll("line").attr("x1",(function(t){return t.source.x||0})).attr("y1",(function(t){return t.source.y||0})).attr("x2",(function(t){return t.target.x||0})).attr("y2",(function(t){return t.target.y||0})),n.selectAll("text").attr("x",(function(t){return((t.source.x||0)+(t.target.x||0))/2})).attr("y",(function(t){return((t.source.y||0)+(t.target.y||0))/2}))}})),e.state={selectedAtomIds:t.selectedAtomIds||[]},e}return n=s,(r=[{key:"componentDidMount",value:function(){this.renderD3()}},{key:"componentWillReceiveProps",value:function(t){R.compareIds(this.state.selectedAtomIds,t.selectedAtomIds)||this.setState({selectedAtomIds:t.selectedAtomIds})}},{key:"componentDidUpdate",value:function(){this.renderD3()}},{key:"renderD3",value:function(){var t=this;this.simulation=(0,a.forceSimulation)().force("link",(0,a.forceLink)().distance((function(t){return u(t.distance,20)})).strength((function(t){return u(t.strength,1)}))).force("charge",(0,a.forceManyBody)()).force("center",(0,a.forceCenter)(this.props.width/2,this.props.height/2)),this.simulation.nodes(this.nodes).on("tick",(function(){return t.renderTransform()})),this.simulation.force("link").id((function(t){return t.id})).links(this.links)}},{key:"render",value:function(){var t=this;return this.props.modelData||(this.props.modelData={nodes:[],links:[]}),this.nodes=R.updateModels(this.nodes||[],this.props.modelData.nodes),this.links=R.updateModels(this.links||[],this.props.modelData.links),e().createElement("svg",{ref:function(e){t.svg=e},width:this.props.width,height:this.props.height},e().createElement(A,{links:this.links}),e().createElement(b,{selectedAtomIds:this.state.selectedAtomIds,nodes:this.nodes,onClickNode:this.onClickNode,onDragStartedNode:this.onDragStartedNode,onDragEndedNode:this.onDragEndedNode}))}}])&&P(n.prototype,r),s}(e().Component);B.defaultProps={width:500,height:500,selectedAtomIds:[],onChangeSelection:function(){},modelData:{nodes:[],links:[]}},B.propTypes={width:i().number,height:i().number,modelData:i().shape({nodes:i().array,links:i().array}).isRequired,selectedAtomIds:i().arrayOf(i().number),onChangeSelection:i().func};const L=B})(),commonjs2=r})();
//# sourceMappingURL=bundle.js.map